!function(e){Switcheroo=function(e){function t(e,i){for(var s in i)i[s].constructor==Object&&e[s]?t(e[s],i[s]):e[s]=i[s]}this.isOpen=!1,this.optionData=e.data,this.params={data:[],keyBindings:{open:["Control","Shift","F"],close:["Escape"]},text:{closeButton:"Close",searchField:"Start Typing..."},showCategories:!0,prioritizeCategoricalSort:!0,closeOnSelect:!0,caseSensitive:!1},t(this.params,e);var i=document.createElement("div");i.setAttribute("id","switcheroo"),i.style.display="none",this.switcherooContainer=i,document.body.appendChild(this.switcherooContainer);var s=document.createElement("button");s.setAttribute("id","switcheroo-removebutton"),s.innerHTML="Close",s.onclick=function(){this.close()}.bind(this),this.removalButton=s,this.switcherooContainer.appendChild(s);var n=document.createElement("div");n.setAttribute("id","switcheroo-container"),this.searchContainer=n,this.switcherooContainer.appendChild(n);var o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("id","switcheroo-field"),o.setAttribute("placeholder","Start typing..."),o.oninput=this.onFieldInput,this.searchField=o,this.searchContainer.appendChild(this.searchField),this.searchField.focus();var r=document.createElement("div");return r.setAttribute("id","switcheroo-results"),this.searchResults=r,this.searchContainer.appendChild(this.searchResults),this.registerKeyPresses(),this},Switcheroo.prototype.open=function(){this.isOpen||(this.switcherooContainer.style.display="unset",this.isOpen=!0,this.searchField.focus())},Switcheroo.prototype.close=function(){this.isOpen&&(this.switcherooContainer.style.display="none",this.isOpen=!1,this.searchField.value="",this.updateSearchResults())},Switcheroo.prototype.isOpen=function(){return this.isOpen},Switcheroo.prototype.onFieldInput=function(e){Switcheroo.updateSearchResults(e.target.value)},Switcheroo.prototype.updateSearchResults=function(e){var t=function(e){var t=function(e,t){return e.name<t.name?-1:e.name>t.name?1:0},i=function(e,t){return e.category<t.category?-1:e.category>t.category?1:0},s=e.sort(t);return this.params.showCategories&&this.params.prioritizeCategoricalSort&&(s=s.sort(i)),s}.bind(this);if(this.searchResults.innerHTML="",this.currentSearchResults=[],e&&""!==e){var i=this.optionData.filter(function(t,i){var s=this.params.caseSensitive?t.name:t.name.toLowerCase(),n=this.params.caseSensitive?t.category:t.category.toLowerCase(),o=this.params.caseSensitive?e:e.toLowerCase();return s.startsWith(o)||this.params.showCategories&&n.startsWith(o)}.bind(this));i=t(i),i.forEach(function(e,t){var i=document.createElement("label");i.className+="switcheroo-option",this.setSelectedResult(0),i.innerHTML=(this.params.showCategories?e.category+": ":"")+e.name;var s={element:i,option:e};i.onclick=function(){this.currentlySelectedResult=s,this.selectResult()}.bind(this),this.searchResults.appendChild(i),this.currentSearchResults.push(s)}.bind(this))}},Switcheroo.prototype.getData=function(){return this.optionData},Switcheroo.prototype.registerKeyPresses=function(){this.keyBindingMap||(this.keyBindingMap={}),document.onkeydown=function(t){if(t=t||e.event,this.keyBindingMap[t.key]=!0,this.isOpen){var i=this.params.keyBindings.close,s=i.every(function(e){return e in this.keyBindingMap&&this.keyBindingMap[e]===!0}.bind(this));s&&this.close()}else{var n=this.params.keyBindings.open,s=n.every(function(e){return e in this.keyBindingMap&&this.keyBindingMap[e]===!0}.bind(this));s&&this.open()}}.bind(this),document.onkeyup=function(t){if(t=t||e.event,t.key in this.keyBindingMap&&(this.keyBindingMap[t.key]=!1),this.isOpen)switch(t.key){case"Enter":this.selectResult();break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":this.navigate(t.key);break;default:this.autoFocusField(t)}}.bind(this)},Switcheroo.prototype.autoFocusField=function(e){var t=function(e){return"undefined"==typeof e.which?!0:"number"==typeof e.which&&e.which>0?!e.ctrlKey&&!e.metaKey&&!e.altKey&&8!=e.which&&1===e.key.length:!1};if(t(e)){var i=document.activeElement;if(this.searchField!==i){this.searchField.value;this.searchField.value+=e.key,this.searchField.focus(),this.updateSearchResults(this.searchField.value)}}},Switcheroo.prototype.navigate=function(e){var t=this.currentSearchResults,i=-1,s=t.length-1;switch(t.forEach(function(e,t){e.element.classList.contains("switcheroo-selected")&&(i=t)}),e){case"ArrowDown":this.setSelectedResult(i!==s?i+1:0);break;case"ArrowUp":this.setSelectedResult(i>0?i-1:t.length-1)}},Switcheroo.prototype.setSelectedResult=function(e){function t(e,t){var i=e.getBoundingClientRect().top,s=e.getBoundingClientRect().bottom,n=t.getBoundingClientRect().top,o=t.getBoundingClientRect().bottom,r=i>=n&&o>=s;e&&e.scrollIntoView&&!r&&e.scrollIntoView()}var i=this.currentSearchResults;0>e||e>=i.length||(i.forEach(function(e){e.element.classList.contains("switcheroo-selected")&&e.element.classList.remove("switcheroo-selected")}),i[e].element.classList.add("switcheroo-selected"),t(i[e].element,this.searchResults),this.currentlySelectedResult=i[e])},Switcheroo.prototype.selectResult=function(){var e=this.currentlySelectedResult;if(e){var t={};e.option.action&&t.toString.call("[object Function]"===e.option.action)&&e.option.action(e.option),this.params.closeOnSelect&&this.close()}}}(window);